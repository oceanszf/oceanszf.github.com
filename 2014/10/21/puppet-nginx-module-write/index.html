<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Puppet Nginx module write | Suzf Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="搞puppet也有三几天了，一些概念还不是很清晰。很多时候实验未成功，都是概念没有理清楚、文档没有看全。别的就先不说了，先来安装一个nginx 来试一下吧。
1、编写nginx模块接下来我们先采动创建模块信息来完成Nginx的部署：需要创建模块录，虚拟主机采件的式进管理。创建模块的信息需要运如下知识点：资源：yumrepo、package、file、service、cron。模板：nginx.co">
<meta property="og:type" content="article">
<meta property="og:title" content="Puppet Nginx module write">
<meta property="og:url" content="http://blog.suzf.net/2014/10/21/puppet-nginx-module-write/index.html">
<meta property="og:site_name" content="Suzf Blog">
<meta property="og:description" content="搞puppet也有三几天了，一些概念还不是很清晰。很多时候实验未成功，都是概念没有理清楚、文档没有看全。别的就先不说了，先来安装一个nginx 来试一下吧。
1、编写nginx模块接下来我们先采动创建模块信息来完成Nginx的部署：需要创建模块录，虚拟主机采件的式进管理。创建模块的信息需要运如下知识点：资源：yumrepo、package、file、service、cron。模板：nginx.co">
<meta property="og:updated_time" content="2016-01-13T07:11:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Puppet Nginx module write">
<meta name="twitter:description" content="搞puppet也有三几天了，一些概念还不是很清晰。很多时候实验未成功，都是概念没有理清楚、文档没有看全。别的就先不说了，先来安装一个nginx 来试一下吧。
1、编写nginx模块接下来我们先采动创建模块信息来完成Nginx的部署：需要创建模块录，虚拟主机采件的式进管理。创建模块的信息需要运如下知识点：资源：yumrepo、package、file、service、cron。模板：nginx.co">
  
    <link rel="alternative" href="/atom.xml" title="Suzf Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Suzf Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Life is short, We need smile.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.suzf.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-puppet-nginx-module-write" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/21/puppet-nginx-module-write/" class="article-date">
  <time datetime="2014-10-21T04:02:48.000Z" itemprop="datePublished">2014-10-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Puppet/">Puppet</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Puppet Nginx module write
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>搞puppet也有三几天了，一些概念还不是很清晰。很多时候实验未成功，都是概念没有理清楚、文档没有看全。别的就先不说了，先来安装一个nginx 来试一下吧。</p>
<p>1、编写nginx模块<br>接下来我们先采动创建模块信息来完成Nginx的部署：需要创建模块录，虚拟主机采件<br>的式进管理。创建模块的信息需要运如下知识点：<br>资源：yumrepo、package、file、service、cron。<br>模板：nginx.conf.erb。<br>创建模块时建议创建README件，接下来对模块的使与安装进详细说明。 </p>
<p>2、创建模块录，代码如下：<br>1</p>
<p>#mkdir -p /etc/puppet/modules/nginx/{manifests,templates,files,tests}</p>
<p>3、创建模块主配置件，代码如下： </p>
<p>#cat /etc/puppet/modules/nginx/manifests/init.pp</p>
<h1 id="Class_3A_nginx"><a href="#Class_3A_nginx" class="headerlink" title="Class: nginx"></a>Class: nginx</h1><p>#</p>
<p>#Install nginx.<br>#</p>
<p>#Parameters:</p>
<h1 id="*__24nginx_user-_Defaults_to__u2018nginx_u2019"><a href="#*__24nginx_user-_Defaults_to__u2018nginx_u2019" class="headerlink" title="* $nginx_user. Defaults to ‘nginx’."></a>* $nginx_user. Defaults to ‘nginx’.</h1><h1 id="*_worker_processes-_Defaults_to__26lt_3B__25_3D_processorcount__25_26gt_3B"><a href="#*_worker_processes-_Defaults_to__26lt_3B__25_3D_processorcount__25_26gt_3B" class="headerlink" title="* worker_processes. Defaults to &lt; %= processorcount %&gt;."></a>* worker_processes. Defaults to &lt; %= processorcount %&gt;.</h1><p>#</p>
<p>#Create config directories :</p>
<h1 id="*_/etc/nginx/conf-d_for_sites_includes"><a href="#*_/etc/nginx/conf-d_for_sites_includes" class="headerlink" title="* /etc/nginx/conf.d for sites includes"></a>* /etc/nginx/conf.d for sites includes</h1><p>#</p>
<p>#Templates:</p>
<h1 id="nginx-conf-erb__3D_26gt_3B_/etc/nginx/nginx-conf"><a href="#nginx-conf-erb__3D_26gt_3B_/etc/nginx/nginx-conf" class="headerlink" title="- nginx.conf.erb =&gt; /etc/nginx/nginx.conf"></a>- nginx.conf.erb =&gt; /etc/nginx/nginx.conf</h1><p>#</p>
<p>class nginx {<br>$real_nginx_user = $nginx_user ? { ‘’ =&gt; ‘nginx’, default =&gt; $nginx_user }<br>$nginx_conf      = “/etc/nginx/conf.d”<br>$nginx_logrote   = “/etc/nginx/conf.d/nginx_logrote.sh”<br>yumrepo { “nginx”:<br>descr    =&gt; “nginx repo”,<br>baseurl  =&gt; “<a href="http://nginx.org/packages/centos/\$releasever/\$basearch/" target="_blank" rel="external">http://nginx.org/packages/centos/\$releasever/\$basearch/</a>“,<br>gpgcheck =&gt; “0”,<br>enabled  =&gt; “1”;<br>}<br>package { “nginx”:<br>ensure        =&gt; installed,<br>require       =&gt; Yumrepo[“nginx”],<br>allow_virtual =&gt; false;<br>}<br>service { ‘nginx’:<br>ensure     =&gt; running,<br>enable     =&gt; true,<br>hasrestart =&gt; true,<br>hasstatus  =&gt; true,<br>subscribe  =&gt; File[“nginx.conf”],<br>}<br>file { ‘nginx.conf’:<br>ensure   =&gt; present,<br>mode     =&gt; 644,<br>owner    =&gt; root,<br>group    =&gt; root,<br>path     =&gt; ‘/etc/nginx/nginx.conf’,<br>content  =&gt; template(“nginx/nginx.conf.erb”),<br>notify   =&gt; Exec[“reload-nginx”],<br>require  =&gt; Package[“nginx”],<br>}<br>file { “$nginx_conf”:<br>ensure   =&gt; directory,<br>recurse  =&gt; true,<br>force    =&gt; true,</p>
<p>#purge    =&gt; true,<br>source   =&gt; “puppet:///modules/nginx/conf.d”,<br>notify   =&gt; Exec[“reload-nginx”],<br>require  =&gt; Package[“nginx”],<br>}<br>file { “$nginx_logrote”:<br>ensure   =&gt; file,<br>mode     =&gt; 755,<br>owner    =&gt; root,<br>group    =&gt; root,<br>source   =&gt; “puppet:///modules/nginx/nginx_logrote.sh”,<br>}<br>cron { ‘nginx_logrote_cron’:<br>command  =&gt; “/bin/bash {$nginx_logrote} &gt; /dev/null 2&gt;&amp;1”,<br>user     =&gt; root,<br>minute   =&gt; ‘0’,<br>hour     =&gt; ‘0’,<br>}<br>exec { ‘reload-nginx’:<br>command     =&gt; “/etc/init.d/nginx reload”,<br>refreshonly =&gt; true,<br>}<br>}</p>
<p>以上代码中定义了：<br>变量，将nginx户、虚拟主机录及志件定义为变量，便在该作域内引。<br>yumrepo资源，使yumrepo定义Nginx软件包来源，Puppet会在yum软件源中创建<br>nginx.repo件。<br>以上代码中定义了：<br>File资源，nginx.conf采模块的式实现，配置件中部分参数便使facts或变量进传递。志件与虚拟主机件采件同步的式实现，并保持录的致性，以避免虚拟主机删除后 不同步的问题。且还使notify属性触发exec进reload动作。<br>service资源，定义Nginx服务的状态，默认随开机启动，puppet agent运时每次检测Nginx服<br>务是否运等。该资源依赖package资源Nginx软件包的安装。<br>cron资源，定义志清除脚本定时运。每天零点采root进志切割。<br>exec资源，定义Nginx服务的reload命令为资源，便虚拟主机变更时进加载。 </p>
<p>4、创建nginx主配置件：<br>我们定义节选核的nginx.conf配置件，其中的nginx进程个数由facts传递，与服务器线程数相<br>同。具体代码如下:</p>
<h1 id="cat_/etc/puppet/modules/nginx/templates/nginx-conf-erb"><a href="#cat_/etc/puppet/modules/nginx/templates/nginx-conf-erb" class="headerlink" title="cat /etc/puppet/modules/nginx/templates/nginx.conf.erb"></a>cat /etc/puppet/modules/nginx/templates/nginx.conf.erb</h1><p>user &lt; %= real_nginx_user %&gt;;<br>worker_processes &lt; %= processorcount %&gt;;<br>error_log /var/log/nginx/error.log notice;<br>pid /var/run/nginx.pid;<br>events {<br>use epoll;<br>worker_connections 51200;<br>}<br>http {<br>include /etc/nginx/mime.types;<br>default_type application/octet-stream;<br>charset utf-8;<br>log_format main ‘$remote_addr - $remote_user [$time_local] “$request” ‘<br>                ‘$status $body_bytes_sent “$http_referer” ‘<br>                 ‘“$http_user_agent” “$http_x_forwarded_for”‘;<br>access_log /var/log/nginx/access.log main;<br>server_names_hash_bucket_size 128;<br>client_header_buffer_size 32k;<br>large_client_header_buffers 4 32k;<br>client_body_buffer_size 8m; #256k<br>sendfile on;</p>
<p>#timeouts<br>keepalive_timeout 0;</p>
<p>#TCP Options<br>tcp_nopush on;<br>tcp_nodelay on;<br>client_max_body_size 50m;<br>include /etc/nginx/conf.d/*.conf;<br>}</p>
<p>4、创建虚拟主机录及件。<br>对所有的虚拟主机进录同步管理，创建agent.domain.com虚拟主机，定义其内容如下： </p>
<h1 id="mkdir_-p_/etc/puppet/files/nginx/conf-d__23_vim_/etc/puppet/files/nginx/conf-d/agent1-jeffery-com-conf_server__7B"><a href="#mkdir_-p_/etc/puppet/files/nginx/conf-d__23_vim_/etc/puppet/files/nginx/conf-d/agent1-jeffery-com-conf_server__7B" class="headerlink" title="mkdir -p /etc/puppet/files/nginx/conf.d # vim /etc/puppet/files/nginx/conf.d/agent1.jeffery.com.conf server {"></a>mkdir -p /etc/puppet/files/nginx/conf.d # vim /etc/puppet/files/nginx/conf.d/agent1.jeffery.com.conf server {</h1><pre><code>listen 80;
server_name agent1.jeffery.com
root        /var/www/html/agent1.jeffery.com;
location    /nginx_status {
stub_status on;
access_log off;
</code></pre><p>}<br>}</p>
<p>5、创建志轮循脚本，具体如下： </p>
<h1 id="cat_/etc/puppet/modules/nginx/files/nginx_logrote-sh"><a href="#cat_/etc/puppet/modules/nginx/files/nginx_logrote-sh" class="headerlink" title="cat /etc/puppet/modules/nginx/files/nginx_logrote.sh"></a>cat /etc/puppet/modules/nginx/files/nginx_logrote.sh</h1><p>#!/bin/bash</p>
<h1 id="This_script_run_at_00_3A00"><a href="#This_script_run_at_00_3A00" class="headerlink" title="This script run at 00:00"></a>This script run at 00:00</h1><h1 id="The_Nginx_logs_path"><a href="#The_Nginx_logs_path" class="headerlink" title="The Nginx logs path"></a>The Nginx logs path</h1><p>logs_path=”/var/log/nginx/“<br>PIDFILE=/var/run/nginx.pid<br>ACCESS_LOG=”${logs<em>path}$(date -d “yesterday” +”%Y”)/$(date -d “yesterday” +”%m”)/access</em>$(date -d “yesterday” ERROR_LOG=”${logs<em>path}$(date -d “yesterday” +”%Y”)/$(date -d “yesterday” +”%m”)/error</em>$(date -d “yesterday” mkdir -p ${logs_path}$(date -d “yesterday” +”%Y”)/$(date -d “yesterday” +”%m”)/<br>mv ${logs_path}access.log $ACCESS_LOG<br>mv ${logs_path}error.log $ERROR_LOG<br>kill -USR1 <code>cat $PIDFILE</code></p>
<p>#gzip<br>/bin/gzip -9 $ACCESS_LOG<br>/bin/gzip -9 $ERROR_LOG</p>
<p>#rm<br>find ${logs_path} -name “*.log.gz” -mtime +7|xargs rm –f</p>
<p>6、设置同步主机、模块</p>
<h1 id="cat_/etc/puppet/manifests/site-pp"><a href="#cat_/etc/puppet/manifests/site-pp" class="headerlink" title="cat /etc/puppet/manifests/site.pp"></a>cat /etc/puppet/manifests/site.pp</h1><p>$fileserver = “master.jeffery.com”<br>import  “nodes/cnc/*.pp”</p>
<p>#import ‘/etc/puppet/manifests/nodes/cnc/agent1.jeffery.com.pp’</p>
<h1 id="cat_/etc/puppet/manifests/nodes/cnc/agent1-jeffery-com-pp"><a href="#cat_/etc/puppet/manifests/nodes/cnc/agent1-jeffery-com-pp" class="headerlink" title="cat /etc/puppet/manifests/nodes/cnc/agent1.jeffery.com.pp"></a>cat /etc/puppet/manifests/nodes/cnc/agent1.jeffery.com.pp</h1><p>node ‘agent1.jeffery.com’ {<br>    include  nginx</p>
<pre><code>#include httpd
#include  memcached
</code></pre><p>}</p>
<p>7、在客户端运puppet命令可以看到Finished完成的提，具体如下：<br>notice: Finished catalog run in 18.76 seconds<br>这时我们可以看到/etc/nginx/conf.d录已经同步了志切割件与虚拟主机agent的配置件，并<br>且Nginx服务已启动。<br>到这我们已经完成了编写nginx模块，并在客户端成功进应。整个过程不是常复杂，<br>在编写时只需要知道每个步骤及其实现的功能就可以轻松完成。 </p>
<p>二、接下来看如何利官Forge提供的nginx模块实现Nginx部署。<br>编写模块并不像我们想象中的那么复杂，并且灵活可定制。当然也可以使Puppetlabs官Forge上所提供的nginx模块来实现。使时只需要参考模块 录下的README件即可。</p>
<p>1、使命令puppet modules查找模块，代码如下： </p>
<p>#puppet module search nginx # puppet module search nginx<br>Notice: Searching <a href="https://forgeapi.puppetlabs.com" target="_blank" rel="external">https://forgeapi.puppetlabs.com</a> …<br>NAME                    DESCRIPTION                                            AUTHOR            KEYWORDS<br>jfryman-nginx           Puppet NGINX management module                         @jfryman          nginx http proxy rack<br>puppetlabs-nginx        Puppet NGINX management module<br>…</p>
<p>2、可以看到许多通过官验证的模块，在这我们采官Puppetlabs的nginx模块进安装，代码<br>如下： </p>
<h1 id="puppet_module_install_puppetlabs-nginx"><a href="#puppet_module_install_puppetlabs-nginx" class="headerlink" title="puppet module install puppetlabs-nginx"></a>puppet module install puppetlabs-nginx</h1><p>Notice: Preparing to install into /etc/puppet/modules …<br>Notice: Downloading from <a href="https://forgeapi.puppetlabs.com" target="_blank" rel="external">https://forgeapi.puppetlabs.com</a> …<br>Notice: Installing – do not interrupt …<br>/etc/puppet/modules<br>└─┬ puppetlabs-nginx (v99.99.99)<br>  └── puppetlabs-stdlib (v4.3.2)</p>
<p>安装完成后，可以看到在modules录下多出两个模块：stdlib与nginx。</p>
<p>stdlib是puppet提供的函数 库。</p>
<p>nginx模块使了此函数库的函数。</p>
<p>查看nginx模块内容如下： </p>
<h1 id="ll_-th_modules/nginx"><a href="#ll_-th_modules/nginx" class="headerlink" title="ll -th modules/nginx"></a>ll -th modules/nginx</h1><p>total 32K<br>-r–r–r– 1 root root 2.6K May  2 02:36 metadata.json<br>-r–r–r– 1 root root  369 May  2 02:35 Modulefile<br>drwxr-xr-x 4 root root 4.0K Apr 22 08:10 manifests<br>drwxr-xr-x 4 root root 4.0K Apr 22 08:10 templates<br>drwxr-xr-x 2 root root 4.0K Apr 22 08:10 tests<br>-r–r–r– 1 root root  665 Sep  5  2013 README.markdown<br>-r–r–r– 1 root root 2.5K Sep  5  2013 ChangeLog<br>-r–r–r– 1 root root    0 Sep  5  2013 README<br>-r–r–r– 1 root root  523 Sep  4  2013 LICENSE</p>
<h1 id="u67E5_u770B_u5B89_u88C5_u6A21_u5757"><a href="#u67E5_u770B_u5B89_u88C5_u6A21_u5757" class="headerlink" title="查看安装模块"></a>查看安装模块</h1><h1 id="puppet_module_list"><a href="#puppet_module_list" class="headerlink" title="puppet  module list"></a>puppet  module list</h1><p>#puppet 卸载模块</p>
<h1 id="puppet_module_install_puppetlabs-nginx__23__u6216_u76F4_u63A5_u5C06_u8FD9_u4E2A_u76EE_u5F55_u5E72_u6389"><a href="#puppet_module_install_puppetlabs-nginx__23__u6216_u76F4_u63A5_u5C06_u8FD9_u4E2A_u76EE_u5F55_u5E72_u6389" class="headerlink" title="puppet module install puppetlabs-nginx    # 或直接将这个目录干掉"></a>puppet module install puppetlabs-nginx    # 或直接将这个目录干掉</h1><p>3、客户端安装同上，更多内容请查看 README 文档</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.suzf.net/2014/10/21/puppet-nginx-module-write/" data-id="ciq4n5j9d004u7xo9bfuoncnk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Puppet/">Puppet</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/11/03/mysql-replication/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Mysql之replication初探
        
      </div>
    </a>
  
  
    <a href="/2014/10/20/mysql-basic-common-summary/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">MYSQL 常用总结【基础】</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Auto-ops/">Auto ops</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CouchBase/">CouchBase</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hardware/">Hardware</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Highcharts/">Highcharts</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LVS/">LVS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MongoDB/">MongoDB</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Puppet/">Puppet</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">13</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMD/">CMD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ceph/">Ceph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian/">Debian</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exsi/">Exsi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flask/">Flask</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GTID/">GTID</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel/">Kernel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kickstart/">Kickstart</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LB/">LB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LVS/">LVS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lnmp/">Lnmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log/">Log</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/">Mysql</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NoSQL/">NoSQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Proxy/">Proxy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Puppet/">Puppet</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAC/">RAC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Re/">Re</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZK/">ZK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zabbix/">Zabbix</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coredump/">coredump</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/couchbase/">couchbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/">debug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diy/">diy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/expect/">expect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facter/">facter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/faq/">faq</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/highcharts/">highcharts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idrac/">idrac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iso/">iso</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvm/">lvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rewrite/">rewrite</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsyslog/">rsyslog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmp/">snmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/strace/">strace</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sudo/">sudo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcpdump/">tcpdump</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiki/">wiki</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/CMD/" style="font-size: 10px;">CMD</a> <a href="/tags/Ceph/" style="font-size: 10.91px;">Ceph</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/ELK/" style="font-size: 10px;">ELK</a> <a href="/tags/Exsi/" style="font-size: 10px;">Exsi</a> <a href="/tags/Flask/" style="font-size: 10px;">Flask</a> <a href="/tags/GTID/" style="font-size: 10.91px;">GTID</a> <a href="/tags/Kernel/" style="font-size: 10.91px;">Kernel</a> <a href="/tags/Kickstart/" style="font-size: 10px;">Kickstart</a> <a href="/tags/LB/" style="font-size: 10px;">LB</a> <a href="/tags/LVS/" style="font-size: 10px;">LVS</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lnmp/" style="font-size: 10px;">Lnmp</a> <a href="/tags/Log/" style="font-size: 10px;">Log</a> <a href="/tags/MongoDB/" style="font-size: 11.82px;">MongoDB</a> <a href="/tags/Mysql/" style="font-size: 19.09px;">Mysql</a> <a href="/tags/Nginx/" style="font-size: 16.36px;">Nginx</a> <a href="/tags/NoSQL/" style="font-size: 12.73px;">NoSQL</a> <a href="/tags/Oracle/" style="font-size: 11.82px;">Oracle</a> <a href="/tags/PHP/" style="font-size: 10.91px;">PHP</a> <a href="/tags/Proxy/" style="font-size: 10px;">Proxy</a> <a href="/tags/Puppet/" style="font-size: 14.55px;">Puppet</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/RAC/" style="font-size: 10.91px;">RAC</a> <a href="/tags/Re/" style="font-size: 11.82px;">Re</a> <a href="/tags/ZK/" style="font-size: 10px;">ZK</a> <a href="/tags/Zabbix/" style="font-size: 18.18px;">Zabbix</a> <a href="/tags/bug/" style="font-size: 10px;">bug</a> <a href="/tags/code/" style="font-size: 10px;">code</a> <a href="/tags/coredump/" style="font-size: 10px;">coredump</a> <a href="/tags/couchbase/" style="font-size: 10px;">couchbase</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/diy/" style="font-size: 10px;">diy</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/expect/" style="font-size: 10px;">expect</a> <a href="/tags/facter/" style="font-size: 10px;">facter</a> <a href="/tags/faq/" style="font-size: 17.27px;">faq</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/highcharts/" style="font-size: 10px;">highcharts</a> <a href="/tags/idrac/" style="font-size: 10px;">idrac</a> <a href="/tags/iso/" style="font-size: 10px;">iso</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/lvm/" style="font-size: 10px;">lvm</a> <a href="/tags/pip/" style="font-size: 12.73px;">pip</a> <a href="/tags/redis/" style="font-size: 15.45px;">redis</a> <a href="/tags/rewrite/" style="font-size: 10px;">rewrite</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/rsyslog/" style="font-size: 10px;">rsyslog</a> <a href="/tags/snmp/" style="font-size: 10px;">snmp</a> <a href="/tags/strace/" style="font-size: 10px;">strace</a> <a href="/tags/sudo/" style="font-size: 10px;">sudo</a> <a href="/tags/tcpdump/" style="font-size: 10px;">tcpdump</a> <a href="/tags/tomcat/" style="font-size: 13.64px;">tomcat</a> <a href="/tags/vim/" style="font-size: 10.91px;">vim</a> <a href="/tags/web/" style="font-size: 12.73px;">web</a> <a href="/tags/wiki/" style="font-size: 10px;">wiki</a> <a href="/tags/zookeeper/" style="font-size: 12.73px;">zookeeper</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/12/839/">Linux 下使用 strace 诊断疑难杂症</a>
          </li>
        
          <li>
            <a href="/2016/04/27/MySQL_mysqldump_数据导出详解/">MySQL mysqldump 数据导出详解</a>
          </li>
        
          <li>
            <a href="/2016/04/24/Python_Re_module_learn/">Python Re module learn</a>
          </li>
        
          <li>
            <a href="/2016/04/22/Python正则表达式操作指南/">Python正则表达式操作指南</a>
          </li>
        
          <li>
            <a href="/2016/04/18/Hello_Kafka/">Hello Kafka</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Jeffrey Su<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>