
 <!DOCTYPE HTML>
<html lang="default">
<head>
  <meta charset="UTF-8">
  
    <title>How-to:  Using yum with a Proxy Server | Suzf Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Jeffrey Su">
    

    
    <meta name="description" content="Using yum with a Proxy Server
By default, yum accesses network repositories with HTTP. All yum HTTP operations use HTTP/1.1, and are compatible with web proxy servers that support this standard. You m">
<meta property="og:type" content="article">
<meta property="og:title" content="How-to:  Using yum with a Proxy Server">
<meta property="og:url" content="http://blog.suzf.net/2015/08/10/proxy-using-yum-with-a-proxy-server/index.html">
<meta property="og:site_name" content="Suzf Blog">
<meta property="og:description" content="Using yum with a Proxy Server
By default, yum accesses network repositories with HTTP. All yum HTTP operations use HTTP/1.1, and are compatible with web proxy servers that support this standard. You m">
<meta property="og:updated_time" content="2016-01-13T07:38:52.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How-to:  Using yum with a Proxy Server">
<meta name="twitter:description" content="Using yum with a Proxy Server
By default, yum accesses network repositories with HTTP. All yum HTTP operations use HTTP/1.1, and are compatible with web proxy servers that support this standard. You m">

    
    <link rel="alternative" href="/atom.xml" title="Suzf Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    <a href="https://github.com/oceanszf"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://blog.suzf.net/img/forkme.png" alt="Fork me on GitHub"></a>
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Suzf Blog" title="Suzf Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Suzf Blog">Suzf Blog</a></h1>
				<h2 class="blog-motto">Life is short, We need smile.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:blog.suzf.net">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/10/proxy-using-yum-with-a-proxy-server/" title="How-to:  Using yum with a Proxy Server" itemprop="url">How-to:  Using yum with a Proxy Server</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Jeffrey Su" target="_blank" itemprop="author">Jeffrey Su</a>
		
  <p class="article-time">
    <time datetime="2015-08-10T09:21:18.000Z" itemprop="datePublished"> Published 2015-08-10</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The_proxy_server_-_proxy_server_3Aport_number"><span class="toc-number">1.</span> <span class="toc-text">The proxy server - proxy server:port number</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_account_details_for_yum_connections"><span class="toc-number">2.</span> <span class="toc-text">The account details for yum connections</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_Web_proxy_server_used_by_this_account"><span class="toc-number">3.</span> <span class="toc-text">The Web proxy server used by this account</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_Web_proxy_server_2C_with_the_username_and_password_for_this_account"><span class="toc-number">4.</span> <span class="toc-text">The Web proxy server, with the username and password for this account</span></a></li></ol>
		
		</div>
		
		<p>Using yum with a Proxy Server</p>
<p>By default, yum accesses network repositories with HTTP. All yum HTTP operations use HTTP/1.1, and are compatible with web proxy servers that support this standard. You may also access FTP repositories, and configure yum to use an FTP proxy server. The squid package provides a proxy service for both HTTP/1.1 and FTP connections.<br>[Tip] Modifying yum for Network Compatibility</p>
<p>Refer to the man page for yum.conf for information on HTTP settings that may be modified for compatibility with nonstandard web proxy servers. Alternatively, configure yum to use an FTP proxy server, and access repositories that support FTP. The Fedora repositories support both HTTP and FTP.<a id="more"></a><br>1. Configuring Proxy Server Access</p>
<p>To enable all yum operations to use a proxy server, specify the proxy server details in /etc/yum.conf. The proxy setting must specify the proxy server as a complete URL, including the TCP port number. If your proxy server requires a username and password, specify these by adding proxy_username and proxy_password settings.</p>
<p>The settings below enable yum to use the proxy server mycache.mydomain.com, connecting to port 3128, with the username yum-user and the password qwerty.</p>
<h1 id="The_proxy_server_-_proxy_server_3Aport_number"><a href="#The_proxy_server_-_proxy_server_3Aport_number" class="headerlink" title="The proxy server - proxy server:port number"></a>The proxy server - proxy server:port number</h1><p>proxy=<a href="http://mycache.mydomain.com:3128" target="_blank" rel="external">http://mycache.mydomain.com:3128</a></p>
<h1 id="The_account_details_for_yum_connections"><a href="#The_account_details_for_yum_connections" class="headerlink" title="The account details for yum connections"></a>The account details for yum connections</h1><p>proxy_username=yum-user<br>proxy_password=qwerty</p>
<p>Example 3. Configuration File Settings for Using A Proxy Server<br>[Note] Global Settings</p>
<p>If you define a proxy server in /etc/yum.conf, all users connect to the proxy server with those details when using yum.<br>2. Configuring Proxy Server Access for a Single User</p>
<p>To enable proxy access for a specific user, add the lines in the example box below to the user’s shell profile. For the default bash shell, the profile is the file ~/.bash_profile. The settings below enable yum to use the proxy server mycache.mydomain.com, connecting to port 3128.</p>
<h1 id="The_Web_proxy_server_used_by_this_account"><a href="#The_Web_proxy_server_used_by_this_account" class="headerlink" title="The Web proxy server used by this account"></a>The Web proxy server used by this account</h1><p>http_proxy=”<a href="http://mycache.mydomain.com:3128" target="_blank" rel="external">http://mycache.mydomain.com:3128</a>“<br>export http_proxy</p>
<p>Example 4. Profile Settings for Using a Proxy Server</p>
<p>If the proxy server requires a username and password, add these to the URL. To include the username yum-user and the password qwerty, add these settings:</p>
<h1 id="The_Web_proxy_server_2C_with_the_username_and_password_for_this_account"><a href="#The_Web_proxy_server_2C_with_the_username_and_password_for_this_account" class="headerlink" title="The Web proxy server, with the username and password for this account"></a>The Web proxy server, with the username and password for this account</h1><p>http_proxy=”<a href="http://yum-user:qwerty@mycache.mydomain.com:3128" target="_blank" rel="external">http://yum-user:qwerty@mycache.mydomain.com:3128</a>“<br>export http_proxy</p>
<p>Example 5. Profile Settings for a Secured Proxy Server<br>[Note] The http_proxy Environment Variable</p>
<p>The http_proxy environment variable is also used by curl and other utilities. Although yum itself may use http_proxy in either upper-case or lower-case, curl requires the name of the variable to be in lower-case.</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Proxy/">Proxy</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://blog.suzf.net/2015/08/10/proxy-using-yum-with-a-proxy-server/" data-title="How-to:  Using yum with a Proxy Server | Suzf Blog" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/08/11/tomcat-auto-update-script/" title="Tomcat  自动更新脚本">
  <strong>上一篇：</strong><br/>
  <span>
  Tomcat  自动更新脚本</span>
</a>
</div>


<div class="next">
<a href="/2015/08/10/rpm-faq-unpacking-of-archive-failed-on-file-xxx-cpio-rename/"  title="Yum_Faq:  unpacking of archive failed on file XXX: cpio: rename">
 <strong>下一篇：</strong><br/> 
 <span>Yum_Faq:  unpacking of archive failed on file XXX: cpio: rename
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The_proxy_server_-_proxy_server_3Aport_number"><span class="toc-number">1.</span> <span class="toc-text">The proxy server - proxy server:port number</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_account_details_for_yum_connections"><span class="toc-number">2.</span> <span class="toc-text">The account details for yum connections</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_Web_proxy_server_used_by_this_account"><span class="toc-number">3.</span> <span class="toc-text">The Web proxy server used by this account</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The_Web_proxy_server_2C_with_the_username_and_password_for_this_account"><span class="toc-number">4.</span> <span class="toc-text">The Web proxy server, with the username and password for this account</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Apache/" title="Apache">Apache<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Auto-ops/" title="Auto ops">Auto ops<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/CouchBase/" title="CouchBase">CouchBase<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/HA/" title="HA">HA<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hadoop/" title="Hadoop">Hadoop<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Highcharts/" title="Highcharts">Highcharts<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Life/" title="Life">Life<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/MongoDB/" title="MongoDB">MongoDB<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Mysql/" title="Mysql">Mysql<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/Nginx/" title="Nginx">Nginx<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/Oracle/" title="Oracle">Oracle<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Puppet/" title="Puppet">Puppet<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/categories/Shell/" title="Shell">Shell<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tomcat/" title="Tomcat">Tomcat<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Web/" title="Web">Web<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Zabbix/" title="Zabbix">Zabbix<sup>13</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Zabbix/" title="Zabbix">Zabbix<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Mysql/" title="Mysql">Mysql<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/faq/" title="faq">faq<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Nginx/" title="Nginx">Nginx<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Puppet/" title="Puppet">Puppet<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/tomcat/" title="tomcat">tomcat<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/web/" title="web">web<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/pip/" title="pip">pip<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Oracle/" title="Oracle">Oracle<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MongoDB/" title="MongoDB">MongoDB<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/NoSQL/" title="NoSQL">NoSQL<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Kernel/" title="Kernel">Kernel<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Ceph/" title="Ceph">Ceph<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/RAC/" title="RAC">RAC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/vim/" title="vim">vim<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/snmp/" title="snmp">snmp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/rsync/" title="rsync">rsync<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/iso/" title="iso">iso<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/facter/" title="facter">facter<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://suzf.net" target="_blank" title="Jeffrey&#39;s Blog">Jeffrey&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m a linuser. <br/>
			This is my blog, share with you. ^_^</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/oceanszf" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:i@suzf.net" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

    <p class="copyright">
        Copyright © 2016 <a href="http://suzf.net" target="_blank" title=SUZF.NET">SUZF.NET</a> All Rights Reserved."
		
	</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
