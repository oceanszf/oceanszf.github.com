<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Puppet set up dashboard success version | Suzf Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Puppet Dasshboard是由支持Puppet开发的公司Puppetlabs创建的，是Ruby on Rails程序。可以作为一个ENC（外部节点分类器）以及一个报告工具，并且正在逐渐成为一个包含许多Puppet新功能的集成界面，例如审计和资源管 理功能。 Puppet Dashboard是一个Ruby on Rails程序，用于显示Puppet master和agent的相关信息。它允许">
<meta property="og:type" content="article">
<meta property="og:title" content="Puppet set up dashboard success version">
<meta property="og:url" content="http://blog.suzf.net/2015/03/18/puppet-set-up-dashboard-success-version/index.html">
<meta property="og:site_name" content="Suzf Blog">
<meta property="og:description" content="Puppet Dasshboard是由支持Puppet开发的公司Puppetlabs创建的，是Ruby on Rails程序。可以作为一个ENC（外部节点分类器）以及一个报告工具，并且正在逐渐成为一个包含许多Puppet新功能的集成界面，例如审计和资源管 理功能。 Puppet Dashboard是一个Ruby on Rails程序，用于显示Puppet master和agent的相关信息。它允许">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M01/5B/7B/wKiom1UJha6AhvkbAAIkioLDfzw868.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M02/5B/75/wKioL1UJhumx16eeAAI-AxYGV4k423.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M00/5B/75/wKioL1UJhzPCNmhKAAXu2vpBYQ8318.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M00/5B/7B/wKiom1UJhkyBw3iOAAJCa4-XQVs004.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M01/5B/75/wKioL1UJh5HQQkhLAAI0MtWwlP0990.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M02/5B/75/wKioL1UJh6bhiZWlAAGHXd9bNvA888.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M02/5B/7B/wKiom1UJhp_z5LLhAAFRPwQGzhc644.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M00/5B/75/wKioL1UJh__SnDeVAAEpgLydCtA405.jpg">
<meta property="og:image" content="http://s3.51cto.com/wyfs02/M00/5B/7B/wKiom1UJhubw_m8SAAO1-njCTZk791.jpg">
<meta property="og:updated_time" content="2016-01-13T07:11:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Puppet set up dashboard success version">
<meta name="twitter:description" content="Puppet Dasshboard是由支持Puppet开发的公司Puppetlabs创建的，是Ruby on Rails程序。可以作为一个ENC（外部节点分类器）以及一个报告工具，并且正在逐渐成为一个包含许多Puppet新功能的集成界面，例如审计和资源管 理功能。 Puppet Dashboard是一个Ruby on Rails程序，用于显示Puppet master和agent的相关信息。它允许">
  
    <link rel="alternative" href="/atom.xml" title="Suzf Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Suzf Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Life is short, We need smile.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.suzf.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-puppet-set-up-dashboard-success-version" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/18/puppet-set-up-dashboard-success-version/" class="article-date">
  <time datetime="2015-03-18T14:10:21.000Z" itemprop="datePublished">2015-03-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Puppet/">Puppet</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Puppet set up dashboard success version
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Puppet Dasshboard是由支持Puppet开发的公司Puppetlabs创建的，是Ruby on Rails程序。可以作为一个ENC（外部节点分类器）以及一个报告工具，并且正在逐渐成为一个包含许多Puppet新功能的集成界面，例如审计和资源管 理功能。 Puppet Dashboard是一个Ruby on Rails程序，用于显示Puppet master和agent的相关信息。它允许你查看从一个或多个Puppet master汇总的图形和报告数据。它同时从一个或者多个Puppet master上收集来自于Puppet agent的资产数据（主机的Fact和其他信息）。最后，它能作为一个ENC来配置Puppet节点，并指定这些节点上的类和参数。 </p>
<p>参考文档：</p>
<p><a href="http://kisspuppet.com/2014/10/20/puppet_learning_ext8/" target="_blank" rel="external">http://kisspuppet.com/2014/10/20/puppet_learning_ext8/</a></p>
<p><a href="http://ruby-on-rails-book.kejyun.com/install/install-passenger.html" target="_blank" rel="external">http://ruby-on-rails-book.kejyun.com/install/install-passenger.html</a><br>1 前期准备工作</p>
<p>Puppet Dashboard（1.2.3）程序目前版本只能安装在Ruby 1.8.x（Dashboard还不能工作在1.9.x下或者更新的版本下），只支持MySQL作为数据库后端。</p>
<p>Rake version 0.8.3 or newerMySQL database server version 5.xRuby-MySQL bindings version 2.7.x or 2.8.x</p>
<p>备注：更多详细信息请参考：<a href="http://docs.puppetlabs.com/dashboard/" target="_blank" rel="external">http://docs.puppetlabs.com/dashboard/</a><br>2 安装相关软件包</p>
<h1 id="yum_install_ruby-mysql_mysql-server_puppet-dashboard"><a href="#yum_install_ruby-mysql_mysql-server_puppet-dashboard" class="headerlink" title="yum install  ruby-mysql mysql-server puppet-dashboard"></a>yum install  ruby-mysql mysql-server puppet-dashboard</h1><p>3 配置Dashboard（包括与数据库的结合部分）</p>
<p>3.1 创建管理Dashboard的MySQL数据库账号并授权</p>
<h1 id="/etc/rc-d/init-d/mysqld_restart"><a href="#/etc/rc-d/init-d/mysqld_restart" class="headerlink" title="/etc/rc.d/init.d/mysqld restart"></a>/etc/rc.d/init.d/mysqld restart</h1><h1 id="chkconfig_mysqld_on"><a href="#chkconfig_mysqld_on" class="headerlink" title="chkconfig mysqld on"></a>chkconfig mysqld on</h1><h1 id="mysqladmin_-uroot_password_xxx"><a href="#mysqladmin_-uroot_password_xxx" class="headerlink" title="mysqladmin -uroot password xxx"></a>mysqladmin -uroot password xxx</h1><p>#mysql uroot -p<br>mysql&gt; create database dashboard_production character set utf8;<br>mysql&gt; grant all on dashboard_production.* to ‘dashboard’@’localhost’ identified by “xxxx”;<br>mysql&gt; flush privileges;    </p>
<p>#测试账号是否创建成功<br>mysql -udashboard -p -e “show processlist”;</p>
<p>3.2 优化数据库配置文件my.cnf</p>
<h1 id="vim_/etc/my-cnf"><a href="#vim_/etc/my-cnf" class="headerlink" title="vim /etc/my.cnf"></a>vim /etc/my.cnf</h1><p>[mysqld]</p>
<h1 id="Allowing_32MB_allows_an_occasional_17MB_row_with_plenty_of_spare_roommax_allowed_packet__3D_32M"><a href="#Allowing_32MB_allows_an_occasional_17MB_row_with_plenty_of_spare_roommax_allowed_packet__3D_32M" class="headerlink" title="Allowing 32MB allows an occasional 17MB row with plenty of spare roommax_allowed_packet = 32M"></a>Allowing 32MB allows an occasional 17MB row with plenty of spare roommax_allowed_packet = 32M</h1><h1 id="/etc/rc-d/init-d/mysqld_restart__23_u91CD_u542FMySQL_u751F_u6548"><a href="#/etc/rc-d/init-d/mysqld_restart__23_u91CD_u542FMySQL_u751F_u6548" class="headerlink" title="/etc/rc.d/init.d/mysqld restart #重启MySQL生效"></a>/etc/rc.d/init.d/mysqld restart #重启MySQL生效</h1><p>3.3 编辑dashboard YAML配置文件（database.yml）来指定数据库</p>
<h1 id="vim_/usr/share/puppet-dashboard/config/database-yml"><a href="#vim_/usr/share/puppet-dashboard/config/database-yml" class="headerlink" title="vim /usr/share/puppet-dashboard/config/database.yml"></a>vim /usr/share/puppet-dashboard/config/database.yml</h1><p>production:<br>database: dashboard_production<br>username: dashboard<br>password: xxx</p>
<p>encoding: utf8  adapter: mysql</p>
<p>…</p>
<p>3.4 填充数据库</p>
<h1 id="cd_/usr/share/puppet-dashboard/"><a href="#cd_/usr/share/puppet-dashboard/" class="headerlink" title="cd /usr/share/puppet-dashboard/"></a>cd /usr/share/puppet-dashboard/</h1><h1 id="rake_gems_3Arefresh_specs"><a href="#rake_gems_3Arefresh_specs" class="headerlink" title="rake gems:refresh_specs"></a>rake gems:refresh_specs</h1><h1 id="rake_RAILS_ENV_3Dproduction_db_3Amigrate"><a href="#rake_RAILS_ENV_3Dproduction_db_3Amigrate" class="headerlink" title="rake RAILS_ENV=production db:migrate"></a>rake RAILS_ENV=production db:migrate</h1><p>#环境变量RAILS_ENV=production告诉Ruby on Rails我们工作在生产环境。每次你运行一个rake命令都需要使用合适的环境值来设置RAILS_ENV环境变量</p>
<p>3.5 查看是否导入成功<br><img src="http://s3.51cto.com/wyfs02/M01/5B/7B/wKiom1UJha6AhvkbAAIkioLDfzw868.jpg" alt=""></p>
<p>4 启动并运行Dashboard（WEBrick方式）</p>
<p>WEBrick有助于快速使用Dashboard，不过它不能很好地进行扩展，并且当有许多Puppet agent向Dashboard进行报告时，它的性能会非常差，因此不推荐使用。</p>
<p>4.1 关闭httpd服务</p>
<h1 id="/etc/rc-d/init-d/httpd_stop__23_u4E4B_u524D_u914D_u7F6E_u8FC7_u4F7F_u7528httpd_u8FD0_u884Cpuppetmaster_uFF0C_u9700_u8981_u5173_u95ED"><a href="#/etc/rc-d/init-d/httpd_stop__23_u4E4B_u524D_u914D_u7F6E_u8FC7_u4F7F_u7528httpd_u8FD0_u884Cpuppetmaster_uFF0C_u9700_u8981_u5173_u95ED" class="headerlink" title="/etc/rc.d/init.d/httpd stop #之前配置过使用httpd运行puppetmaster，需要关闭"></a>/etc/rc.d/init.d/httpd stop #之前配置过使用httpd运行puppetmaster，需要关闭</h1><p>4.2 启动puppetmaster服务</p>
<h1 id="/etc/rc-d/init-d/puppetmaster_start"><a href="#/etc/rc-d/init-d/puppetmaster_start" class="headerlink" title="/etc/rc.d/init.d/puppetmaster start"></a>/etc/rc.d/init.d/puppetmaster start</h1><p>4.3 启动puppet-dashboard服务</p>
<h1 id="/etc/rc-d/init-d/puppet-dashboard_start__23_u542F_u52A8dashboard_Starting_Puppet_Dashboard_3A__3D_26gt_3B_Booting_WEBrick_3D_26gt_3B_Rails_2-3-17_application_starting_on_http_3A//0-0-0-0_3A3000__5B_OK__5D"><a href="#/etc/rc-d/init-d/puppet-dashboard_start__23_u542F_u52A8dashboard_Starting_Puppet_Dashboard_3A__3D_26gt_3B_Booting_WEBrick_3D_26gt_3B_Rails_2-3-17_application_starting_on_http_3A//0-0-0-0_3A3000__5B_OK__5D" class="headerlink" title="/etc/rc.d/init.d/puppet-dashboard start #启动dashboard    Starting Puppet Dashboard: =&gt; Booting WEBrick=&gt; Rails 2.3.17 application starting on http://0.0.0.0:3000                                                           [  OK  ]"></a>/etc/rc.d/init.d/puppet-dashboard start #启动dashboard    Starting Puppet Dashboard: =&gt; Booting WEBrick=&gt; Rails 2.3.17 application starting on <a href="http://0.0.0.0:3000" target="_blank" rel="external">http://0.0.0.0:3000</a>                                                           [  OK  ]</h1><p>4.4 通过浏览器访问<a href="http://172.16.7.81:3000" target="_blank" rel="external">http://172.16.7.81:3000</a><br><img src="http://s3.51cto.com/wyfs02/M02/5B/75/wKioL1UJhumx16eeAAI-AxYGV4k423.jpg" alt=""></p>
<p>5 启动并运行Dashboard（Passenger方式）</p>
<p>5.1 使用Ruby Gem安装Passenger</p>
<h1 id="yum_install_ruby-devel_ruby-libs_rubygems_libcurl-devel_23_yum_install_httpd_httpd-devel_apr-util-devel_apr-devel_mod_ssl"><a href="#yum_install_ruby-devel_ruby-libs_rubygems_libcurl-devel_23_yum_install_httpd_httpd-devel_apr-util-devel_apr-devel_mod_ssl" class="headerlink" title="yum install ruby-devel ruby-libs rubygems libcurl-devel# yum install httpd httpd-devel apr-util-devel apr-devel mod_ssl"></a>yum install ruby-devel ruby-libs rubygems libcurl-devel# yum install httpd httpd-devel apr-util-devel apr-devel mod_ssl</h1><h1 id="gem_install_passenger"><a href="#gem_install_passenger" class="headerlink" title="gem install passenger"></a>gem install passenger</h1><h1 id="passenger-install-apache2-module"><a href="#passenger-install-apache2-module" class="headerlink" title="passenger-install-apache2-module"></a>passenger-install-apache2-module</h1><p>注：安装过程会检查所需要的依赖包，若果发生错误，请按照passenger的提示安装<br><img src="http://s3.51cto.com/wyfs02/M00/5B/75/wKioL1UJhzPCNmhKAAXu2vpBYQ8318.jpg" alt=""></p>
<p>我这里缺少OpenSSL包，所以需要再重新安裝</p>
<h1 id="yum_install_openssl-devel_-y"><a href="#yum_install_openssl-devel_-y" class="headerlink" title="yum install openssl-devel -y"></a>yum install openssl-devel -y</h1><p>重新安装后再次执行passenger-install-apache2-module 安裝 Apache Passenger 套件即可，安装的过程需要编译apache 套件，所以需要一些时间</p>
<p>5.2 配置虚拟主机和passenger</p>
<h1 id="vim_/etc/httpd/conf-d/passenger-conf"><a href="#vim_/etc/httpd/conf-d/passenger-conf" class="headerlink" title="vim /etc/httpd/conf.d/passenger.conf"></a>vim /etc/httpd/conf.d/passenger.conf</h1><p>LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-4.0.19/buildout/apache2/mod_passenger.so</p>
<p><ifmodule mod_passenger.c=""><br>PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-4.0.19<br>PassengerRuby /usr/bin/ruby   PassengerHighPerformance on<br>PassengerMaxPoolSize 12<br>PassengerPoolIdleTime 1500<br>PassengerStatThrottleRate 120 </ifmodule></p>
<h1 id="RailsAutoDetect_On"><a href="#RailsAutoDetect_On" class="headerlink" title="RailsAutoDetect On"></a>RailsAutoDetect On</h1><p><br>Listen 8141</p>
<virtualhost *:8141=""><br>DocumentRoot “/usr/share/puppet-dashboard/public/“<br><directory "="" usr="" share="" puppet-dashboard="" public=""><br>Options None             AllowOverride AuthConfig<br>Order allow,deny<br>allow from all<br></directory><br>ErrorLog /var/log/httpd/dashboard.error.log<br>LogLevel warn<br>CustomLog /var/log/httpd/dashboard.access.log combined<br></virtualhost>

<p>5.3 启动相关服务</p>
<h1 id="/etc/rc-d/init-d/puppetmaster_stop__23_u505C_u6389puppetmaster_u670D_u52A1Stopping_puppetmaster_3A__5B_OK__5D_23_/etc/rc-d/init-d/httpd_restart"><a href="#/etc/rc-d/init-d/puppetmaster_stop__23_u505C_u6389puppetmaster_u670D_u52A1Stopping_puppetmaster_3A__5B_OK__5D_23_/etc/rc-d/init-d/httpd_restart" class="headerlink" title="/etc/rc.d/init.d/puppetmaster stop  #停掉puppetmaster服务Stopping puppetmaster:                                     [  OK  ]# /etc/rc.d/init.d/httpd restart"></a>/etc/rc.d/init.d/puppetmaster stop  #停掉puppetmaster服务Stopping puppetmaster:                                     [  OK  ]# /etc/rc.d/init.d/httpd restart</h1><p>5.4 通过浏览器访问测试</p>
<p><a href="http://172.16.7.81:8141/" target="_blank" rel="external">http://172.16.7.81:8141/</a><br><img src="http://s3.51cto.com/wyfs02/M00/5B/7B/wKiom1UJhkyBw3iOAAJCa4-XQVs004.jpg" alt=""></p>
<p>6 集成Puppet Dashboard</p>
<p>6.1 手工导入现有的报告（方式一）</p>
<h1 id="cd_/usr/share/puppet-dashboard/_23_rake_RAILS_ENV_3Dproduction_reports_3Aimport__23_u5BFC_u5165_u5DF2_u7ECF_u5B58_u5728_u7684_u62A5_u544A"><a href="#cd_/usr/share/puppet-dashboard/_23_rake_RAILS_ENV_3Dproduction_reports_3Aimport__23_u5BFC_u5165_u5DF2_u7ECF_u5B58_u5728_u7684_u62A5_u544A" class="headerlink" title="cd /usr/share/puppet-dashboard/# rake RAILS_ENV=production reports:import  #导入已经存在的报告"></a>cd /usr/share/puppet-dashboard/# rake RAILS_ENV=production reports:import  #导入已经存在的报告</h1><p><img src="http://s3.51cto.com/wyfs02/M01/5B/75/wKioL1UJh5HQQkhLAAI0MtWwlP0990.jpg" alt=""></p>
<p>备注：默认节点报告会在/var/lib/puppet/reports/ 产生，如果路径发生变化，导入报告时需要在后面加上“REPORT_DIR=report路径”，reports更改路径可在puppet.conf中设置参数“reportdir = 新路径”，这种方式不够实时。<br><img src="http://s3.51cto.com/wyfs02/M02/5B/75/wKioL1UJh6bhiZWlAAGHXd9bNvA888.jpg" alt=""></p>
<p>6.2 配置实施汇总puppet报告（方式二）</p>
<h1 id="u914D_u7F6Eagent_u8282_u70B9_u81EA_u52A8_u53D1_u9001_u62A5_u544A"><a href="#u914D_u7F6Eagent_u8282_u70B9_u81EA_u52A8_u53D1_u9001_u62A5_u544A" class="headerlink" title="配置agent节点自动发送报告"></a>配置agent节点自动发送报告</h1><p>[root@agent1 ~]# vim /etc/puppet/puppet.conf    [agent]report = true                  #从2.7.0版本开始，报告系统会默认开启，不需要配置…</p>
<h1 id="u914D_u7F6Emaster__u62A5_u544A_u6C47_u603B_5Broot@master_puppet-dashboard_5D_23_vim_/etc/puppet/puppet-conf_5Bmain_5D_reports__3D_http"><a href="#u914D_u7F6Emaster__u62A5_u544A_u6C47_u603B_5Broot@master_puppet-dashboard_5D_23_vim_/etc/puppet/puppet-conf_5Bmain_5D_reports__3D_http" class="headerlink" title="配置master  报告汇总[root@master puppet-dashboard]# vim /etc/puppet/puppet.conf[main]    reports = http"></a>配置master  报告汇总[root@master puppet-dashboard]# vim /etc/puppet/puppet.conf[main]    reports = http</h1><pre><code>reporturl = http://172.16.7.81:8141/reports 
</code></pre><p>#定义为http报告处理器，除此之外还有store，log，tagmail，rrdgraph等报告处理器</p>
<p>#http报告处理器将puppet报告发送到一个HTTP URL和端口（Dashboard位置）。Puppet报告以被转储为HTTP Poort形式的YAML格式进行发送。 [root@master ~]# /etc/rc.d/init.d/httpd restart</p>
<p>6.3 开启后台处理报告进程</p>
<p>#运行“Delayed Job Workers”，使其在后台为我们处理报告日志</p>
<p>[root@master puppet-dashboard]# rake RAILS_ENV=production jobs:work &amp;[1] 20577</p>
<p>6.4 修改dashboard时区【master】</p>
<p>Dashboard默认时区为UTC格式，我们这里需要更改为CST（Asia/Shanghai）格式</p>
<h1 id="vim_/usr/share/puppet-dashboard/config/settings-yml"><a href="#vim_/usr/share/puppet-dashboard/config/settings-yml" class="headerlink" title="vim /usr/share/puppet-dashboard/config/settings.yml"></a>vim /usr/share/puppet-dashboard/config/settings.yml</h1><p>time_zone: ‘Asia/Shanghai’…<strong>备注</strong>：设置的settings.yml会覆盖掉config/environment.rb中对应的配置项（config.time_zone = ‘UTC’）</p>
<p>#/etc/init.d/httpd restart</p>
<p>6.5 显示报告</p>
<p>通过<a href="http://172.16.7.81:8141及时查看节点更新的报告信息，可以看到两个节点，默认显示时间为CST格式，除此之外还可以看到某一个节点在某一个时刻的更新报告和运行曲线图。" target="_blank" rel="external">http://172.16.7.81:8141及时查看节点更新的报告信息，可以看到两个节点，默认显示时间为CST格式，除此之外还可以看到某一个节点在某一个时刻的更新报告和运行曲线图。</a><br><img src="http://s3.51cto.com/wyfs02/M02/5B/7B/wKiom1UJhp_z5LLhAAFRPwQGzhc644.jpg" alt=""></p>
<p>6.6 删除报告</p>
<p>删除一个前的报告</p>
<p>[root@master puppet-dashboard]# rake RAILS_ENV=production reports:prune upto=1 unit=mon</p>
<p>删除一天前的报告</p>
<p>[root@master puppet-dashboard]# rake RAILS_ENV=production reports:prune upto=1 unit=day</p>
<p>删除效果如下：<br><img src="http://s3.51cto.com/wyfs02/M00/5B/75/wKioL1UJh__SnDeVAAEpgLydCtA405.jpg" alt=""></p>
<p>7 自定义报告</p>
<p>7.1 编写外部报告处理器</p>
<p>使用现有的被存储的报告，就是那些yaml文件，可以通过设置puppet.conf中reports = store进 行收集。然后编写一个外部的处理器来处理这些信息，例如绘图或者将他们存储在外部数据库。这也是Puppet Dashboard中的报告输入进程的工作原理。这些外部的报告处理器可以很简单地使用Ruby进行编写，以便使用Ruby反序列化YAML文件的能力以 及使用生成的对象。你可以使用任何支持导入第三方ymal数据的工具。</p>
<p>7.2 编写内部报告处理器</p>
<p>编写自定义报告处理器并将它添加到Puppet。和fact、函数、类型及提供者的插件不同，Puppet没有提供一个自动分发自定义报告的方法。</p>
<p>7.2.1 现有报告处理器信息</p>
<p><img src="http://s3.51cto.com/wyfs02/M00/5B/7B/wKiom1UJhubw_m8SAAO1-njCTZk791.jpg" alt=""></p>
<p>7.2.2 自定义摘要报告处理器</p>
<p>7.2.2.1 进入reports目录编写自定义summary.rb报告处理器</p>
<h1 id="cd_/usr/lib/ruby/site_ruby/1-8/puppet/reports"><a href="#cd_/usr/lib/ruby/site_ruby/1-8/puppet/reports" class="headerlink" title="cd /usr/lib/ruby/site_ruby/1.8/puppet/reports"></a>cd /usr/lib/ruby/site_ruby/1.8/puppet/reports</h1><h1 id="vim_summary-rbrequire"><a href="#vim_summary-rbrequire" class="headerlink" title="vim summary.rbrequire"></a>vim summary.rbrequire</h1><p>‘puppet’Puppet::Reports.register_report(:summary)<br>do  desc &lt; &lt;-DESC  Send summary report information to the report directory.<br>DESC  def process<br>client = self.host<br>summary = self.summary<br>dir = File.join(Puppet[:reportdir],client)<br>client = self.host<br>file = “summary.txt”<br>destination = File.join(dir,file)<br>File.open(destination,”w”)<br>do |f|        f.write(summary)<br>end<br>endend</p>
<p>7.2.2.2 将报告处理器的名字加入puppet.conf中，并重新启动httpd服务</p>
<h1 id="vim_/etc/puppet/puppet-conf"><a href="#vim_/etc/puppet/puppet-conf" class="headerlink" title="vim /etc/puppet/puppet.conf"></a>vim /etc/puppet/puppet.conf</h1><p>[main]reports = http,summary…</p>
<h1 id="/etc/rc-d/init-d/httpd_restart"><a href="#/etc/rc-d/init-d/httpd_restart" class="headerlink" title="/etc/rc.d/init.d/httpd restart"></a>/etc/rc.d/init.d/httpd restart</h1><p>7.2.2.3 使用mco命令触发更新节点agent1</p>
<p>[ mco 未完待续 ]<br>下面的这些涉及到 MCollective 事先配置好</p>
<p> mco puppet -v runonce  mco facts -v –with-fact  hostname=’agent1’Discovering hosts using the mc method for 2 second(s) …. 1 * [ ============================================================&gt; ] 1 / 1agent1.kisspuppet.com                      : OK    {:summary=&gt;      “Started a background Puppet run using the ‘puppet agent –onetime –daemonize –color=false –splay –splaylimit 30’ command”}—- rpc stats —-           Nodes: 1 / 1     Pass / Fail: 1 / 0      Start Time: Fri Oct 04 12:54:50 +0800 2013  Discovery Time: 2005.27ms      Agent Time: 1118.41ms      Total Time: 3123.68ms</p>
<p>7.2.2.4 查看新生成的报告信息</p>
<h1 id="cd_/var/lib/puppet/reports/agent1-jeffery-com/_23_cat_summary-txt_Changes_3A_Total_3A_1Events_3A_Total_3A_1_Success_3A_1Resources_3A_Out_of_sync_3A_1_Changed_3A_1_Total_3A_15_Skipped_3A_6Time_3A_Filebucket_3A_0-00_Package_3A_0-00_File_3A_0-11_Service_3A_0-12_Config_retrieval_3A_1-29_Total_3A_1-52_Last_run_3A_1380861882Version_3A_Config_3A_1380861878_Puppet_3A_2-7-23"><a href="#cd_/var/lib/puppet/reports/agent1-jeffery-com/_23_cat_summary-txt_Changes_3A_Total_3A_1Events_3A_Total_3A_1_Success_3A_1Resources_3A_Out_of_sync_3A_1_Changed_3A_1_Total_3A_15_Skipped_3A_6Time_3A_Filebucket_3A_0-00_Package_3A_0-00_File_3A_0-11_Service_3A_0-12_Config_retrieval_3A_1-29_Total_3A_1-52_Last_run_3A_1380861882Version_3A_Config_3A_1380861878_Puppet_3A_2-7-23" class="headerlink" title="cd /var/lib/puppet/reports/agent1.jeffery.com/# cat summary.txt Changes:            Total: 1Events:            Total: 1          Success: 1Resources:      Out of sync: 1          Changed: 1            Total: 15          Skipped: 6Time:       Filebucket: 0.00          Package: 0.00             File: 0.11          Service: 0.12   Config retrieval: 1.29            Total: 1.52         Last run: 1380861882Version:           Config: 1380861878           Puppet: 2.7.23"></a>cd /var/lib/puppet/reports/agent1.jeffery.com/# cat summary.txt Changes:            Total: 1Events:            Total: 1          Success: 1Resources:      Out of sync: 1          Changed: 1            Total: 15          Skipped: 6Time:       Filebucket: 0.00          Package: 0.00             File: 0.11          Service: 0.12   Config retrieval: 1.29            Total: 1.52         Last run: 1380861882Version:           Config: 1380861878           Puppet: 2.7.23</h1><p>在整个报告处理器中，我们定义了一个叫做process的方法来承载处理器的核心逻辑。我们从报告中提取了一些信息：使用self.host方式提取了主机名，使用summary方式提取了变更的摘要。还可以使用self.logs和self.metrics方式来访问报告中的日子以及度量值。 我们同时还将报告的摘要输出了报告目录下对应的以Puppet agent主机名命名的目录中，报告目录的位置是由reportdir配置的值来指定的，默认在/var/lib/puppet/reports/目录下。</p>
<p>备注：更多报告处理器信息请访问</p>
<p>现有报告处理器<a href="https://github.com/puppetlabs/puppet/tree/master/lib/puppet/reports报告参考" target="_blank" rel="external">https://github.com/puppetlabs/puppet/tree/master/lib/puppet/reports报告参考</a> <a href="http://docs.puppetlabs.com/references/latest/report.html#http" target="_blank" rel="external">http://docs.puppetlabs.com/references/latest/report.html#http</a> 报告及报告系统 <a href="http://docs.puppetlabs.com/guides/reporting.html" target="_blank" rel="external">http://docs.puppetlabs.com/guides/reporting.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.suzf.net/2015/03/18/puppet-set-up-dashboard-success-version/" data-id="ciqcd6lnw004rclo9s1ltgi1c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Puppet/">Puppet</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/16/warning-unsafe-statement-written-to-the-binary-log-using-statement-format-since-binlog-format-statement-insert-on-duplicate-key-update-on-a-table-with-more-than-one-unique-key-is-unsafe-state/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          [Warning] Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT.
        
      </div>
    </a>
  
  
    <a href="/2014/12/25/puppet-facter/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Puppet 自定义facter 简述</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Auto-ops/">Auto ops</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CouchBase/">CouchBase</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HA/">HA</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hardware/">Hardware</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Highcharts/">Highcharts</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LVS/">LVS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MongoDB/">MongoDB</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Puppet/">Puppet</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">13</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMD/">CMD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ceph/">Ceph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debian/">Debian</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exsi/">Exsi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flask/">Flask</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GTID/">GTID</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel/">Kernel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kickstart/">Kickstart</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LB/">LB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LVS/">LVS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lnmp/">Lnmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log/">Log</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/">Mysql</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NoSQL/">NoSQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Proxy/">Proxy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Puppet/">Puppet</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAC/">RAC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Re/">Re</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZK/">ZK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zabbix/">Zabbix</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coredump/">coredump</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/couchbase/">couchbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/">debug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diy/">diy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/expect/">expect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facter/">facter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/faq/">faq</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/highcharts/">highcharts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idrac/">idrac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iso/">iso</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvm/">lvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rewrite/">rewrite</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsyslog/">rsyslog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snmp/">snmp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/strace/">strace</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sudo/">sudo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcpdump/">tcpdump</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiki/">wiki</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/CMD/" style="font-size: 10px;">CMD</a> <a href="/tags/Ceph/" style="font-size: 10.91px;">Ceph</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/ELK/" style="font-size: 10px;">ELK</a> <a href="/tags/Exsi/" style="font-size: 10px;">Exsi</a> <a href="/tags/Flask/" style="font-size: 10px;">Flask</a> <a href="/tags/GTID/" style="font-size: 10.91px;">GTID</a> <a href="/tags/Kernel/" style="font-size: 10.91px;">Kernel</a> <a href="/tags/Kickstart/" style="font-size: 10px;">Kickstart</a> <a href="/tags/LB/" style="font-size: 10px;">LB</a> <a href="/tags/LVS/" style="font-size: 10px;">LVS</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lnmp/" style="font-size: 10px;">Lnmp</a> <a href="/tags/Log/" style="font-size: 10px;">Log</a> <a href="/tags/MongoDB/" style="font-size: 11.82px;">MongoDB</a> <a href="/tags/Mysql/" style="font-size: 19.09px;">Mysql</a> <a href="/tags/Nginx/" style="font-size: 16.36px;">Nginx</a> <a href="/tags/NoSQL/" style="font-size: 12.73px;">NoSQL</a> <a href="/tags/Oracle/" style="font-size: 11.82px;">Oracle</a> <a href="/tags/PHP/" style="font-size: 10.91px;">PHP</a> <a href="/tags/Proxy/" style="font-size: 10px;">Proxy</a> <a href="/tags/Puppet/" style="font-size: 14.55px;">Puppet</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/RAC/" style="font-size: 10.91px;">RAC</a> <a href="/tags/Re/" style="font-size: 11.82px;">Re</a> <a href="/tags/ZK/" style="font-size: 10px;">ZK</a> <a href="/tags/Zabbix/" style="font-size: 18.18px;">Zabbix</a> <a href="/tags/bug/" style="font-size: 10px;">bug</a> <a href="/tags/code/" style="font-size: 10px;">code</a> <a href="/tags/coredump/" style="font-size: 10px;">coredump</a> <a href="/tags/couchbase/" style="font-size: 10px;">couchbase</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/diy/" style="font-size: 10px;">diy</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/expect/" style="font-size: 10px;">expect</a> <a href="/tags/facter/" style="font-size: 10px;">facter</a> <a href="/tags/faq/" style="font-size: 17.27px;">faq</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/highcharts/" style="font-size: 10px;">highcharts</a> <a href="/tags/idrac/" style="font-size: 10px;">idrac</a> <a href="/tags/iso/" style="font-size: 10px;">iso</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/lvm/" style="font-size: 10px;">lvm</a> <a href="/tags/pip/" style="font-size: 12.73px;">pip</a> <a href="/tags/redis/" style="font-size: 15.45px;">redis</a> <a href="/tags/rewrite/" style="font-size: 10px;">rewrite</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/rsyslog/" style="font-size: 10px;">rsyslog</a> <a href="/tags/snmp/" style="font-size: 10px;">snmp</a> <a href="/tags/strace/" style="font-size: 10px;">strace</a> <a href="/tags/sudo/" style="font-size: 10px;">sudo</a> <a href="/tags/tcpdump/" style="font-size: 10px;">tcpdump</a> <a href="/tags/tomcat/" style="font-size: 13.64px;">tomcat</a> <a href="/tags/vim/" style="font-size: 10.91px;">vim</a> <a href="/tags/web/" style="font-size: 12.73px;">web</a> <a href="/tags/wiki/" style="font-size: 10px;">wiki</a> <a href="/tags/zookeeper/" style="font-size: 12.73px;">zookeeper</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/12/839/">Linux 下使用 strace 诊断疑难杂症</a>
          </li>
        
          <li>
            <a href="/2016/04/27/MySQL_mysqldump_数据导出详解/">MySQL mysqldump 数据导出详解</a>
          </li>
        
          <li>
            <a href="/2016/04/24/Python_Re_module_learn/">Python Re module learn</a>
          </li>
        
          <li>
            <a href="/2016/04/22/Python正则表达式操作指南/">Python正则表达式操作指南</a>
          </li>
        
          <li>
            <a href="/2016/04/18/Hello_Kafka/">Hello Kafka</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Jeffrey Su<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>